@page
@model IndexModel
@{
    ViewData["Title"] = "Profile";
    ViewData["ActivePage"] = ManageNavPages.Index;
}

<div class="animate-fade-in">
    <partial name="_StatusMessage" for="StatusMessage" />

    <div class="bg-base-100 rounded-lg border border-base-300 p-8">
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-base-content flex items-center gap-3">
                <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center">
                    <i class="fas fa-user text-lg text-primary"></i>
                </div>
                Profile Information
            </h2>
        </div>
        <div>
            <form id="profile-form" method="post">
                @if (!ViewData.ModelState.IsValid && ViewData.ModelState.ErrorCount > 0)
                {
                    <div asp-validation-summary="All" class="alert alert-error mb-4" role="alert"></div>
                }

                <div class="space-y-4">
                    <!-- Username (disabled) -->
                    <div class="form-control">
                        <label class="label" asp-for="Username">
                            <span class="label-text font-semibold">Username</span>
                        </label>
                        <input asp-for="Username" class="input input-bordered bg-base-200" disabled />
                    </div>

                    <!-- Email -->
                    <div class="form-control">
                        <label class="label" asp-for="Input.Email">
                            <span class="label-text font-semibold">Email</span>
                        </label>
                        @if (Model.IsEmailConfirmed)
                        {
                            <div class="join w-full">
                                <input asp-for="Input.Email" class="input input-bordered join-item flex-1" />
                                <span class="join-item btn btn-success no-animation cursor-default">
                                    <i class="fas fa-check-circle"></i>
                                </span>
                            </div>
                        }
                        else
                        {
                            <input asp-for="Input.Email" class="input input-bordered" />
                            <button id="email-verification" type="submit" asp-page-handler="SendVerificationEmail" class="btn btn-link mt-2 p-0">
                                Send verification email
                            </button>
                        }
                        <label class="label">
                            <span asp-validation-for="Input.Email" class="label-text-alt text-error"></span>
                        </label>
                    </div>

                    <!-- Phone Number -->
                    <div class="form-control">
                        <label class="label" asp-for="Input.PhoneNumber">
                            <span class="label-text font-semibold">Phone Number</span>
                        </label>
                        <input asp-for="Input.PhoneNumber" class="input input-bordered" />
                        <label class="label">
                            <span asp-validation-for="Input.PhoneNumber" class="label-text-alt text-error"></span>
                        </label>
                    </div>
                </div>

                <!-- Actions -->
                <div class="flex justify-end mt-6">
                    <button id="update-profile-button" type="submit" class="btn btn-primary btn-lg gap-2">
                        <i class="fas fa-save"></i>
                        Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
